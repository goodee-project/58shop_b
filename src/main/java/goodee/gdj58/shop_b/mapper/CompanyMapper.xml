<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="goodee.gdj58.shop_b.mapper.CompanyMapper">

	<!-- 쇼핑몰 업체 비밀번호 변경 -->
	<update id = "updateCompanyPw"
			parameterType = "goodee.gdj58.shop_b.vo.Company">
			
		UPDATE shopping_company
		SET	company_pw = PASSWORD(#{companyPw})
		WHERE company_id = #{companyId}
				
	</update>

	<!-- 비밀번호 변경 시 현재 비밀번호 확인 -->
	<select id = "selectPwCheck"
			parameterType = "goodee.gdj58.shop_b.vo.Company"
			resultType = "java.lang.String">
	
		SELECT
			company_id companyId
		FROM shopping_company
		WHERE company_id = #{companyId}
			AND company_pw = PASSWORD(#{companyPw})
			
	</select>	
	

	<!-- 쇼핑몰 업체 정보 수정 -->
	<update id = "updateCompany"
			parameterType = "goodee.gdj58.shop_b.vo.Company">
	
		UPDATE shopping_company
		SET
			company_phone = #{companyPhone}
			, company_email = #{companyEmail}
			, company_address = #{companyAddress}
			, company_bank = #{companyBank}
			, company_account = #{companyAccount}
			, company_email_marketing = #{companyEmailMarketing}
			, type_no = #{typeNo}
			, updatedate = NOW()
		WHERE company_id = #{companyId}
			
	</update>


	<!-- 쇼핑몰 업체 정보 조회 -->
	<select id = "selectCompany"
			parameterType = "java.lang.String"
			resultType = "java.util.Map">
	
		SELECT
			c.company_id companyId
			, c.company_registration_number companyRegistrationNumber
			, c.company_name companyName
			, c.company_ceo companyCeo
			, c.company_phone companyPhone
			, c.company_email companyEmail
			, c.company_address companyAddress
			, c.company_bank companyBank
			, c.company_account companyAccount
			, c.company_email_marketing companyEmailMarketing
			, t.type_content typeContent
			, c.updatedate
			, c.createdate
		FROM shopping_company c
			INNER JOIN shopping_type t
			ON c.type_no = t.type_no
		WHERE company_id = #{companyId} 					
			
	</select>

	<!-- 쇼핑몰 업체 로그인 -->
	<select id = "loginCompany"
			parameterType = "goodee.gdj58.shop_b.vo.Company"
			resultType = "goodee.gdj58.shop_b.vo.Company">
	
		SELECT
			company_id companyId
			, company_name companyName
		FROM shopping_company
		WHERE company_id = #{companyId}
			AND company_pw = PASSWORD(#{companyPw})
			
	</select>	


	<!-- 쇼핑몰 업체 리스트 -->
	<select id = "selectCompanyList"
			resultType = "goodee.gdj58.shop_b.vo.Company">
		
		SELECT
			company_id companyId
			, company_registration_number companyRegistrationNumber
			, company_name companyName
			, company_ceo companyCeo
			, company_phone companyPhone
			, company_email companyEmail
			, company_address companyAddress
			, company_bank companyBank
			, company_account companyAccount
			, company_email_marketing companyEmailMarketing
			, type_no typeNo
			, updatedate
			, createdate
		FROM shopping_company
		ORDER BY createdate DESC
	
	</select>

	<!-- 쇼핑몰 업체 추가 -->
	<insert id = "insertCompany"
			parameterType = "goodee.gdj58.shop_b.vo.Company">
			
		INSERT INTO shopping_company (
			company_id
			, company_pw
			, company_registration_number
			, company_name
			, company_ceo
			, company_phone
			, company_email
			, company_address
			, company_bank
			, company_account
			, company_email_marketing
			, type_no
		) VALUES (
			#{companyId}
			, PASSWORD(#{companyPw})
			, #{companyRegistrationNumber}
			, #{companyName}
			, #{companyCeo}
			, #{companyPhone}
			, #{companyEmail}
			, #{companyAddress}
			, #{companyBank}
			, #{companyAccount}
			, #{companyEmailMarketing}
			, #{typeNo}
		)
	
	</insert>






</mapper>